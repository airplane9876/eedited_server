generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DB_DEVELOPMENT_URL")
}

model User {
    userId         String       @id @db.VarChar(50)
    password       String       @db.VarChar(100)
    birthday       DateTime?    @db.Date
    email          String       @unique @db.VarChar(100)
    followerCnt    Int          @default(0)
    uploadVideoCnt Int          @default(0)
    proTag         Boolean      @default(false)
    createdAt      DateTime     @default(now())
    updatedAt      DateTime     @updatedAt
    VideoLiker     VideoLiker[]
    Video         Video[]
}

model VideoLiker {
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    userId    String   @db.VarChar(50)
    videoId   String
    uploader  String   @db.VarChar(50)
    User     User     @relation(fields: [userId], references: [userId])
    Video    Video    @relation(fields: [uploader, videoId], references: [uploader, id])

    @@id([uploader, userId, videoId])
}

model Video {
    uploader    String       @db.VarChar(50)
    id          String          @default(uuid())
    title       String       @db.VarChar(50)
    discription String       @db.Text
    url         String       @db.VarChar(100)
    likeCnt     Int          @default(0)
    viewCnt     Int          @default(0)
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt
    User       User         @relation(fields: [uploader], references: [userId])
    VideoLiker  VideoLiker[]

    @@id([uploader, id])
}
